{"version":3,"file":"SignIn.stories-6296e68e.js","sources":["../../src/Pages/SignIn.jsx"],"sourcesContent":["import HomeLayout from \"../Layout/HomeLayout\";\r\nimport { useContext, useState } from \"react\";\r\nimport { AuthContext } from \"../Context/UserAuthContext\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { loginUser } from \"../Store/authSlice\";\r\nimport { PiSpinnerBold } from \"react-icons/pi\";\r\nimport { AiOutlineEye, AiOutlineEyeInvisible } from \"react-icons/ai\";\r\nimport {\r\n  toastMessageError,\r\n  toastMessageSuccess,\r\n} from \"../services/ToastMessage/ToastMessage\";\r\nimport { useDispatch } from \"react-redux\";\r\n// import { collection, getDocs, query, where } from \"firebase/firestore\";\r\n// import { firestoreDb } from \"../Utils/Firebase\";\r\nconst SignIn = () => {\r\n  const dispatch = useDispatch();\r\n  const { login } = useContext(AuthContext);\r\n  const [formValues, setFormValues] = useState([]);\r\n  const [formError, setFormError] = useState([]);\r\n  const [togglePassword, setTogglePassword] = useState(\"password\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n  //   function for togglePassword\r\n  const handleTogglePassword = () => {\r\n    if (togglePassword === \"text\") {\r\n      setTogglePassword(\"password\");\r\n    }\r\n\r\n    if (togglePassword === \"password\") {\r\n      setTogglePassword(\"text\");\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { value, name } = e.target;\r\n    setFormValues({ ...formValues, [name]: value });\r\n  };\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    if (formValues.password.trim().length === 0) {\r\n      setFormError({ [\"password\"]: \"Please enter your password.\" });\r\n      setIsLoading(false);\r\n    }\r\n    if (formValues.password.trim().length > 0) {\r\n      setFormError({});\r\n      await login(formValues.email, formValues.password)\r\n        .then(async (user) => {\r\n          dispatch(\r\n            loginUser({\r\n              email: user.user.email,\r\n              uid: user.user.uid,\r\n              displayName: user?.user?.displayName,\r\n            })\r\n          );\r\n\r\n          toastMessageSuccess(\r\n            `Welcome! ${\r\n              user?.user?.displayName != null ? user?.user.displayName : \"\"\r\n            }`\r\n          );\r\n          // afterLogin();\r\n          navigate(\"/\");\r\n        })\r\n        .catch((err) => {\r\n          if (err.code === \"auth/user-not-found\") {\r\n            toastMessageError(\"User Not found\");\r\n          }\r\n          if (err.code === \"auth/wrong-password\") {\r\n            toastMessageError(\"Password didnot match.\");\r\n          }\r\n          if (err.code === \"auth/too-many-requests\") {\r\n            toastMessageError(\"Too many attempts. Please wait.\");\r\n          } else {\r\n            toastMessageError(\"Invalid Password\");\r\n          }\r\n        })\r\n        .finally(() => {\r\n          setIsLoading(false);\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <HomeLayout>\r\n      <form\r\n        action=\"\"\r\n        onSubmit={handleSubmit}\r\n        className=\"w-[20rem] sm:w-[28rem] h-[28rem] flex flex-col justify-start items-center p-10 bg-white border-[1px] shadow-md text-black border-black/10 rounded-sm gap-10\">\r\n        <p className=\"w-full flex  text-blue-600 justify-center items-center text-[1.5rem] capitalize font-[600] border-b-[1px] border-black/30 py-2\">\r\n          sign In\r\n        </p>\r\n        <label\r\n          htmlFor=\"email\"\r\n          className=\"w-full text-black flex justify-center items-center flex-col text-sm gap-1\">\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            required\r\n            id=\"email\"\r\n            onChange={handleChange}\r\n            className=\"border-[1px] outline-0 p-1 px-3 h-[2.7rem] w-full sm:w-[95%] rounded-sm border-black/40 focus:outline focus:outline-2 focus:outline-blue-300 focus:outline-offset-1 focus:border-blue-500\"\r\n            placeholder=\"Email\"\r\n          />\r\n        </label>\r\n        <label\r\n          htmlFor=\"Password\"\r\n          className=\"w-full relative flex justify-center items-center flex-col text-sm gap-1\">\r\n          <input\r\n            type={togglePassword}\r\n            name=\"password\"\r\n            required\r\n            id=\"Password\"\r\n            onChange={handleChange}\r\n            maxLength={10}\r\n            className=\"border-[1px] outline-0 p-1 px-3 pr-8 h-[2.7rem] w-full sm:w-[95%] border-black/40 rounded-sm focus:outline focus:outline-2 focus:outline-blue-300 focus:outline-offset-1 focus:border-blue-500\"\r\n            placeholder=\"Password\"\r\n          />\r\n          <span\r\n            className=\"absolute right-4 top-[0.67rem] cursor-pointer hover:bg-gray-300/80 text-black/80 flex justify-center items-center p-[2px] rounded-full\"\r\n            onClick={handleTogglePassword}>\r\n            {togglePassword === \"text\" ? (\r\n              <AiOutlineEye size={20} />\r\n            ) : (\r\n              <AiOutlineEyeInvisible size={20} />\r\n            )}\r\n          </span>\r\n          {formError.password && (\r\n            <span className=\"w-[25rem] px-[2px] h-auto text-rose-400\">\r\n              {formError.password}\r\n            </span>\r\n          )}\r\n        </label>\r\n\r\n        <button\r\n          disabled={isLoading}\r\n          type=\"submit\"\r\n          className={`w-full sm:w-[95%] capitalize bg-blue-600 flex justify-center ${\r\n            isLoading ? \"cursor-not-allowed\" : \"cursor-pointer\"\r\n          }  items-center min-h-[2.6rem] p-0 rounded-[3px] text-md font-[500] text-white border-[1px] border-blue-200 hover:bg-blue-500 hover:border-blue-500`}>\r\n          {isLoading ? (\r\n            <span className=\"w-full flex justify-center items-center gap-2 text-lg animate-pulse\">\r\n              <PiSpinnerBold size={30} className=\"animate-spin \" /> Processing\r\n            </span>\r\n          ) : (\r\n            \"Sign In\"\r\n          )}\r\n        </button>\r\n\r\n        <div className=\"w-full  text-gray-700 flex justify-center items-center gap-1 flex-wrap\">\r\n          {`Don't Have an account?`}\r\n          <Link\r\n            to=\"/signup\"\r\n            className=\"underline underline-offset-2 decoration-1 italic hover:no-underline text-blue-500\">\r\n            Sign Up\r\n          </Link>\r\n        </div>\r\n      </form>\r\n    </HomeLayout>\r\n  );\r\n};\r\n\r\nexport default SignIn;\r\n"],"names":["SignIn","dispatch","useDispatch","login","useContext","AuthContext","formValues","setFormValues","useState","formError","setFormError","togglePassword","setTogglePassword","isLoading","setIsLoading","navigate","useNavigate","handleTogglePassword","handleChange","e","value","name","handleSubmit","user","loginUser","_a","toastMessageSuccess","_b","err","toastMessageError","HomeLayout","jsxs","jsx","AiOutlineEye","AiOutlineEyeInvisible","PiSpinnerBold","Link","SignIn$1"],"mappings":"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"}